{"version":3,"sources":["../../../source/test/library/scenario-01.test.js"],"names":["DefaultCompare","ModuleCompare","Path","Test","Scenario","_Compare","Compare","FilePath","_URL","fileURLToPath","import","meta","url","FolderPath","dirname","Require","_createRequire","resolve","forEach","path","relative","test","scenario","createScenarioFromFile","referenceHtml","serverHtml","browserHtml","Promise","all","getReferenceHtml","getServerHtml","getBrowserHtml","isEqual","log","repeat","false","true","throwsAsync","Error"],"mappings":"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","sourcesContent":["import DefaultCompare, * as ModuleCompare from 'html-differ'\nimport Path from 'path'\nimport Test from 'ava'\n\nimport { Scenario } from './scenario.js'\n\nconst { 'HtmlDiffer': _Compare } = DefaultCompare || ModuleCompare\nconst Compare = new _Compare({ 'compareAttributesAsJSON': [ { 'name': 'style', 'isFunction': false } ], 'ignoreComments': false })\nconst FilePath = __filePath\nconst FolderPath = Path.dirname(FilePath)\nconst Require = __require\n\n;[ \n  Require.resolve('./resource/scenario-01/attribute/03-multiline-attribute.pug'),\n  Require.resolve('./resource/scenario-01/comment/04-conditional-comment.pug'),\n  Require.resolve('./resource/scenario-01/include/02-filtered-text.pug')\n].forEach((path) => {\n\n  Test(`'${Path.relative(`${FolderPath}/resource/scenario-01`, path)}' browser is equal to server is not equal to reference`, async (test) => {\n\n    let scenario = await Scenario.createScenarioFromFile(path)\n    let [ referenceHtml, serverHtml, browserHtml ] = await Promise.all([ scenario.getReferenceHtml(), scenario.getServerHtml(), scenario.getBrowserHtml() ])\n\n    if (Compare.isEqual(serverHtml, referenceHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('reference')\n      test.log('-'.repeat(80))\n      test.log(referenceHtml)\n\n      test.log('-'.repeat(80))\n      test.log('server')\n      test.log('-'.repeat(80))\n      test.log(serverHtml)\n\n    }\n\n    test.false(Compare.isEqual(serverHtml, referenceHtml))\n\n    if (!Compare.isEqual(browserHtml, serverHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('server')\n      test.log('-'.repeat(80))\n      test.log(serverHtml)\n\n      test.log('-'.repeat(80))\n      test.log('browser')\n      test.log('-'.repeat(80))\n      test.log(browserHtml)\n\n    }\n\n    test.true(Compare.isEqual(browserHtml, serverHtml))\n\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/scenario-01/attribute/18-innerText.pug')\n].forEach((path) => {\n\n  Test(`'${Path.relative(`${FolderPath}/resource/scenario-01`, path)}' browser is not equal to server is not equal to reference`, async (test) => {\n\n    let scenario = await Scenario.createScenarioFromFile(path)\n    let [ referenceHtml, serverHtml, browserHtml ] = await Promise.all([ scenario.getReferenceHtml(), scenario.getServerHtml(), scenario.getBrowserHtml() ])\n\n    if (Compare.isEqual(serverHtml, referenceHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('reference')\n      test.log('-'.repeat(80))\n      test.log(referenceHtml)\n\n      test.log('-'.repeat(80))\n      test.log('server')\n      test.log('-'.repeat(80))\n      test.log(serverHtml)\n\n    }\n\n    test.false(Compare.isEqual(serverHtml, referenceHtml))\n\n    if (Compare.isEqual(browserHtml, serverHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('server')\n      test.log('-'.repeat(80))\n      test.log(serverHtml)\n\n      test.log('-'.repeat(80))\n      test.log('browser')\n      test.log('-'.repeat(80))\n      test.log(browserHtml)\n\n    }\n\n    test.false(Compare.isEqual(browserHtml, serverHtml))\n\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/scenario-01/filter/02-nested-filter.pug')\n].forEach((path) => {\n\n  Test(`'${Path.relative(`${FolderPath}/resource/scenario-01`, path)}' browser is equal to reference, server is not equal to reference`, async (test) => {\n\n    let scenario = await Scenario.createScenarioFromFile(path)\n    let [ referenceHtml, serverHtml, browserHtml ] = await Promise.all([ scenario.getReferenceHtml(), scenario.getServerHtml(), scenario.getBrowserHtml() ])\n\n    if (Compare.isEqual(serverHtml, referenceHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('reference')\n      test.log('-'.repeat(80))\n      test.log(referenceHtml)\n\n      test.log('-'.repeat(80))\n      test.log('server')\n      test.log('-'.repeat(80))\n      test.log(serverHtml)\n\n    }\n\n    test.false(Compare.isEqual(serverHtml, referenceHtml))\n\n    if (!Compare.isEqual(browserHtml, referenceHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('reference')\n      test.log('-'.repeat(80))\n      test.log(referenceHtml)\n\n      test.log('-'.repeat(80))\n      test.log('browser')\n      test.log('-'.repeat(80))\n      test.log(browserHtml)\n\n    }\n\n    test.true(Compare.isEqual(browserHtml, referenceHtml))\n\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/scenario-01/attribute/04-quoted-attributes.pug')\n].forEach((path) => {\n\n  Test(`'${Path.relative(`${FolderPath}/resource/scenario-01`, path)}' throws Error`, async (test) => {\n    let scenario = await Scenario.createScenarioFromFile(path)\n    await test.throwsAsync(scenario.getBrowserHtml(), { 'instanceOf': Error })\n  })\n\n})\n"],"file":"scenario-01.test.js"}