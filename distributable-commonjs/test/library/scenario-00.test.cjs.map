{"version":3,"sources":["../../../source/test/library/scenario-00.test.js"],"names":["_Compare","DefaultCompare","ModuleCompare","Compare","FilePath","__filename","FolderPath","Path","dirname","Scenario","createScenarioFromFolder","forEach","scenario","Test","modifier","reduce","BaseTest","relative","path","test","referenceHtml","serverHtml","browserHtml","Promise","all","getReferenceHtml","getServerHtml","getBrowserHtml","isEqual","log","repeat","true"],"mappings":";;AAAA;;AACA;;AACA;;AAEA;;;;;;;;AAEA,MAAM;AAAE,gBAAcA;AAAhB,IAA6BC,yBAAkBC,aAArD;AACA,MAAMC,OAAO,GAAG,IAAIH,QAAJ,CAAa;AAAE,6BAA2B,CAAE;AAAE,YAAQ,OAAV;AAAmB,kBAAc;AAAjC,GAAF,CAA7B;AAA2E,oBAAkB;AAA7F,CAAb,CAAhB;AACA,MAAMI,QAAQ,GARdC,UAQA;;AACA,MAAMC,UAAU,GAAGC,cAAKC,OAAL,CAAaJ,QAAb,CAAnB;;AAEEK,mBAASC,wBAAT,CAAmC,GAAEJ,UAAW,uBAAhD,CAAD,CAA0EK,OAA1E,CAAmFC,QAAD,IAAc;AAE/F,MAAIC,IAAI,GAAGD,QAAQ,CAACE,QAAT,CAAkBC,MAAlB,CAAyB,CAACF,IAAD,EAAOC,QAAP,KAAoBD,IAAI,CAACC,QAAD,CAAjD,EAA6DE,YAA7D,CAAX;AAEAH,EAAAA,IAAI,CAAE,IAAGN,cAAKU,QAAL,CAAe,GAAEX,UAAW,uBAA5B,EAAoDM,QAAQ,CAACM,IAA7D,CAAmE,GAAxE,EAA4E,MAAOC,IAAP,IAAgB;AAE9F,QAAI,CAAEC,aAAF,EAAiBC,UAAjB,EAA6BC,WAA7B,IAA6C,MAAMC,OAAO,CAACC,GAAR,CAAY,CAAEZ,QAAQ,CAACa,gBAAT,EAAF,EAA+Bb,QAAQ,CAACc,aAAT,EAA/B,EAAyDd,QAAQ,CAACe,cAAT,EAAzD,CAAZ,CAAvD;;AAEA,QAAI,CAACxB,OAAO,CAACyB,OAAR,CAAgBP,UAAhB,EAA4BD,aAA5B,CAAL,EAAiD;AAE/CD,MAAAA,IAAI,CAACU,GAAL,CAAS,IAAIC,MAAJ,CAAW,EAAX,CAAT;AACAX,MAAAA,IAAI,CAACU,GAAL,CAAS,WAAT;AACAV,MAAAA,IAAI,CAACU,GAAL,CAAS,IAAIC,MAAJ,CAAW,EAAX,CAAT;AACAX,MAAAA,IAAI,CAACU,GAAL,CAAST,aAAT;AAEAD,MAAAA,IAAI,CAACU,GAAL,CAAS,IAAIC,MAAJ,CAAW,EAAX,CAAT;AACAX,MAAAA,IAAI,CAACU,GAAL,CAAS,QAAT;AACAV,MAAAA,IAAI,CAACU,GAAL,CAAS,IAAIC,MAAJ,CAAW,EAAX,CAAT;AACAX,MAAAA,IAAI,CAACU,GAAL,CAASR,UAAT;AAED;;AAEDF,IAAAA,IAAI,CAACY,IAAL,CAAU5B,OAAO,CAACyB,OAAR,CAAgBP,UAAhB,EAA4BD,aAA5B,CAAV;;AAEA,QAAI,CAACjB,OAAO,CAACyB,OAAR,CAAgBN,WAAhB,EAA6BD,UAA7B,CAAL,EAA+C;AAE7CF,MAAAA,IAAI,CAACU,GAAL,CAAS,IAAIC,MAAJ,CAAW,EAAX,CAAT;AACAX,MAAAA,IAAI,CAACU,GAAL,CAAS,QAAT;AACAV,MAAAA,IAAI,CAACU,GAAL,CAAS,IAAIC,MAAJ,CAAW,EAAX,CAAT;AACAX,MAAAA,IAAI,CAACU,GAAL,CAASR,UAAT;AAEAF,MAAAA,IAAI,CAACU,GAAL,CAAS,IAAIC,MAAJ,CAAW,EAAX,CAAT;AACAX,MAAAA,IAAI,CAACU,GAAL,CAAS,SAAT;AACAV,MAAAA,IAAI,CAACU,GAAL,CAAS,IAAIC,MAAJ,CAAW,EAAX,CAAT;AACAX,MAAAA,IAAI,CAACU,GAAL,CAASP,WAAT;AAED;;AAEDH,IAAAA,IAAI,CAACY,IAAL,CAAU5B,OAAO,CAACyB,OAAR,CAAgBN,WAAhB,EAA6BD,UAA7B,CAAV;AAED,GApCG,CAAJ;AAsCD,CA1CA","sourcesContent":["import BaseTest from 'ava'\nimport DefaultCompare, * as ModuleCompare from 'html-differ'\nimport Path from 'path'\n\nimport { Scenario } from './scenario.js'\n\nconst { 'HtmlDiffer': _Compare } = DefaultCompare || ModuleCompare\nconst Compare = new _Compare({ 'compareAttributesAsJSON': [ { 'name': 'style', 'isFunction': false } ], 'ignoreComments': false })\nconst FilePath = __filePath\nconst FolderPath = Path.dirname(FilePath)\n\n;(Scenario.createScenarioFromFolder(`${FolderPath}/resource/scenario-00`)).forEach((scenario) => {\n  \n  let Test = scenario.modifier.reduce((Test, modifier) => Test[modifier], BaseTest)\n\n  Test(`'${Path.relative(`${FolderPath}/resource/scenario-00`, scenario.path)}'`, async (test) => {\n\n    let [ referenceHtml, serverHtml, browserHtml ] = await Promise.all([ scenario.getReferenceHtml(), scenario.getServerHtml(), scenario.getBrowserHtml() ])\n\n    if (!Compare.isEqual(serverHtml, referenceHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('reference')\n      test.log('-'.repeat(80))\n      test.log(referenceHtml)\n\n      test.log('-'.repeat(80))\n      test.log('server')\n      test.log('-'.repeat(80))\n      test.log(serverHtml)\n\n    }\n\n    test.true(Compare.isEqual(serverHtml, referenceHtml))\n\n    if (!Compare.isEqual(browserHtml, serverHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('server')\n      test.log('-'.repeat(80))\n      test.log(serverHtml)\n\n      test.log('-'.repeat(80))\n      test.log('browser')\n      test.log('-'.repeat(80))\n      test.log(browserHtml)\n\n    }\n\n    test.true(Compare.isEqual(browserHtml, serverHtml))\n\n  })\n\n})\n"],"file":"scenario-00.test.cjs"}