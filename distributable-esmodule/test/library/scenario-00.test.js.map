{"version":3,"sources":["../../../source/test/library/scenario-00.test.js"],"names":["BaseTest","DefaultCompare","ModuleCompare","Path","Scenario","_Compare","Compare","FilePath","_URL","fileURLToPath","import","meta","url","FolderPath","dirname","createScenarioFromFolder","forEach","scenario","Test","modifier","reduce","relative","path","test","referenceHtml","serverHtml","browserHtml","Promise","all","getReferenceHtml","getServerHtml","getBrowserHtml","isEqual","log","repeat","true"],"mappings":"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","sourcesContent":["import BaseTest from 'ava'\nimport DefaultCompare, * as ModuleCompare from 'html-differ'\nimport Path from 'path'\n\nimport { Scenario } from './scenario.js'\n\nconst { 'HtmlDiffer': _Compare } = DefaultCompare || ModuleCompare\nconst Compare = new _Compare({ 'compareAttributesAsJSON': [ { 'name': 'style', 'isFunction': false } ], 'ignoreComments': false })\nconst FilePath = __filePath\nconst FolderPath = Path.dirname(FilePath)\n\n;(Scenario.createScenarioFromFolder(`${FolderPath}/resource/scenario-00`)).forEach((scenario) => {\n  \n  let Test = scenario.modifier.reduce((Test, modifier) => Test[modifier], BaseTest)\n\n  Test(`'${Path.relative(`${FolderPath}/resource/scenario-00`, scenario.path)}'`, async (test) => {\n\n    let [ referenceHtml, serverHtml, browserHtml ] = await Promise.all([ scenario.getReferenceHtml(), scenario.getServerHtml(), scenario.getBrowserHtml() ])\n\n    if (!Compare.isEqual(serverHtml, referenceHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('reference')\n      test.log('-'.repeat(80))\n      test.log(referenceHtml)\n\n      test.log('-'.repeat(80))\n      test.log('server')\n      test.log('-'.repeat(80))\n      test.log(serverHtml)\n\n    }\n\n    test.true(Compare.isEqual(serverHtml, referenceHtml))\n\n    if (!Compare.isEqual(browserHtml, serverHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('server')\n      test.log('-'.repeat(80))\n      test.log(serverHtml)\n\n      test.log('-'.repeat(80))\n      test.log('browser')\n      test.log('-'.repeat(80))\n      test.log(browserHtml)\n\n    }\n\n    test.true(Compare.isEqual(browserHtml, serverHtml))\n\n  })\n\n})\n"],"file":"scenario-00.test.js"}