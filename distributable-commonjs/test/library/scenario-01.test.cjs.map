{"version":3,"sources":["../../../source/test/library/scenario-01.test.js"],"names":["_Compare","DefaultCompare","ModuleCompare","Compare","FilePath","__filename","FolderPath","Path","dirname","Require","require","resolve","forEach","path","relative","test","scenario","Scenario","createScenarioFromFile","referenceHtml","serverHtml","browserHtml","Promise","all","getReferenceHtml","getServerHtml","getBrowserHtml","isEqual","log","repeat","false","true","throwsAsync","Error"],"mappings":"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","sourcesContent":["import DefaultCompare, * as ModuleCompare from 'html-differ'\nimport Path from 'path'\nimport Test from 'ava'\n\nimport { Scenario } from './scenario.js'\n\nconst { 'HtmlDiffer': _Compare } = DefaultCompare || ModuleCompare\nconst Compare = new _Compare({ 'compareAttributesAsJSON': [ { 'name': 'style', 'isFunction': false } ], 'ignoreComments': false })\nconst FilePath = __filePath\nconst FolderPath = Path.dirname(FilePath)\nconst Require = __require\n\n;[ \n  Require.resolve('./resource/scenario-01/attribute/03-multiline-attribute.pug'),\n  Require.resolve('./resource/scenario-01/comment/04-conditional-comment.pug'),\n  Require.resolve('./resource/scenario-01/include/02-filtered-text.pug')\n].forEach((path) => {\n\n  Test(`'${Path.relative(`${FolderPath}/resource/scenario-01`, path)}' browser is equal to server is not equal to reference`, async (test) => {\n\n    let scenario = await Scenario.createScenarioFromFile(path)\n    let [ referenceHtml, serverHtml, browserHtml ] = await Promise.all([ scenario.getReferenceHtml(), scenario.getServerHtml(), scenario.getBrowserHtml() ])\n\n    if (Compare.isEqual(serverHtml, referenceHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('reference')\n      test.log('-'.repeat(80))\n      test.log(referenceHtml)\n\n      test.log('-'.repeat(80))\n      test.log('server')\n      test.log('-'.repeat(80))\n      test.log(serverHtml)\n\n    }\n\n    test.false(Compare.isEqual(serverHtml, referenceHtml))\n\n    if (!Compare.isEqual(browserHtml, serverHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('server')\n      test.log('-'.repeat(80))\n      test.log(serverHtml)\n\n      test.log('-'.repeat(80))\n      test.log('browser')\n      test.log('-'.repeat(80))\n      test.log(browserHtml)\n\n    }\n\n    test.true(Compare.isEqual(browserHtml, serverHtml))\n\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/scenario-01/attribute/18-innerText.pug')\n].forEach((path) => {\n\n  Test(`'${Path.relative(`${FolderPath}/resource/scenario-01`, path)}' browser is not equal to server is not equal to reference`, async (test) => {\n\n    let scenario = await Scenario.createScenarioFromFile(path)\n    let [ referenceHtml, serverHtml, browserHtml ] = await Promise.all([ scenario.getReferenceHtml(), scenario.getServerHtml(), scenario.getBrowserHtml() ])\n\n    if (Compare.isEqual(serverHtml, referenceHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('reference')\n      test.log('-'.repeat(80))\n      test.log(referenceHtml)\n\n      test.log('-'.repeat(80))\n      test.log('server')\n      test.log('-'.repeat(80))\n      test.log(serverHtml)\n\n    }\n\n    test.false(Compare.isEqual(serverHtml, referenceHtml))\n\n    if (Compare.isEqual(browserHtml, serverHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('server')\n      test.log('-'.repeat(80))\n      test.log(serverHtml)\n\n      test.log('-'.repeat(80))\n      test.log('browser')\n      test.log('-'.repeat(80))\n      test.log(browserHtml)\n\n    }\n\n    test.false(Compare.isEqual(browserHtml, serverHtml))\n\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/scenario-01/filter/02-nested-filter.pug')\n].forEach((path) => {\n\n  Test(`'${Path.relative(`${FolderPath}/resource/scenario-01`, path)}' browser is equal to reference, server is not equal to reference`, async (test) => {\n\n    let scenario = await Scenario.createScenarioFromFile(path)\n    let [ referenceHtml, serverHtml, browserHtml ] = await Promise.all([ scenario.getReferenceHtml(), scenario.getServerHtml(), scenario.getBrowserHtml() ])\n\n    if (Compare.isEqual(serverHtml, referenceHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('reference')\n      test.log('-'.repeat(80))\n      test.log(referenceHtml)\n\n      test.log('-'.repeat(80))\n      test.log('server')\n      test.log('-'.repeat(80))\n      test.log(serverHtml)\n\n    }\n\n    test.false(Compare.isEqual(serverHtml, referenceHtml))\n\n    if (!Compare.isEqual(browserHtml, referenceHtml)) {\n\n      test.log('-'.repeat(80))\n      test.log('reference')\n      test.log('-'.repeat(80))\n      test.log(referenceHtml)\n\n      test.log('-'.repeat(80))\n      test.log('browser')\n      test.log('-'.repeat(80))\n      test.log(browserHtml)\n\n    }\n\n    test.true(Compare.isEqual(browserHtml, referenceHtml))\n\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/scenario-01/attribute/04-quoted-attributes.pug')\n].forEach((path) => {\n\n  Test(`'${Path.relative(`${FolderPath}/resource/scenario-01`, path)}' throws Error`, async (test) => {\n    let scenario = await Scenario.createScenarioFromFile(path)\n    await test.throwsAsync(scenario.getBrowserHtml(), { 'instanceOf': Error })\n  })\n\n})\n"],"file":"scenario-01.test.cjs"}